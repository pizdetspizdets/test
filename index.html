<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Морзе-кликер: ivan</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #f0f0f0;
        }
        #game-container {
            text-align: center;
            width: 300px;
        }
        .input-button {
            width: 100px;
            height: 100px;
            margin: 10px;
            font-size: 24px;
            cursor: pointer;
        }
        #progress-display, #input-display, #current-letter, #timer, #attempts {
            font-size: 18px;
            margin-bottom: 10px;
        }
        #result {
            font-weight: bold;
            margin-top: 20px;
        }
        #restart-button {
            margin-top: 20px;
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div id="game-container">
        <h1>Морзе-кликер: ivan</h1>
        <p>Нажимайте кнопки для ввода кода Морзе.</p>
        <div id="progress-display"></div>
        <div id="current-letter"></div>
        <div id="timer">Время: 10с</div>
        <div id="attempts">Попытки: 0</div>
        <div id="input-display"></div>
        <div>
            <button class="input-button" id="dot-button">.</button>
            <button class="input-button" id="dash-button">-</button>
        </div>
        <p id="result"></p>
        <button id="restart-button">Начать заново</button>
    </div>

    <script>
        const morseAlphabet = {
            'i': '..', 'v': '...-', 'a': '.-', 'n': '-.'
        };
        const targetWord = 'ivan';
        const targetMorse = targetWord.split('').map(char => morseAlphabet[char]);
        
        let currentInput = '';
        let currentLetterIndex = 0;
        let attempts = 0;
        let timer;
        let timeLeft = 10;

        const dotButton = document.getElementById('dot-button');
        const dashButton = document.getElementById('dash-button');
        const inputDisplay = document.getElementById('input-display');
        const progressDisplay = document.getElementById('progress-display');
        const currentLetterDisplay = document.getElementById('current-letter');
        const timerDisplay = document.getElementById('timer');
        const attemptsDisplay = document.getElementById('attempts');
        const resultDisplay = document.getElementById('result');
        const restartButton = document.getElementById('restart-button');

        function updateProgressDisplay() {
            progressDisplay.textContent = `Прогресс: ${targetWord.slice(0, currentLetterIndex)}`;
        }

        function updateCurrentLetterDisplay() {
            currentLetterDisplay.textContent = `Текущая буква: ${targetWord[currentLetterIndex]}`;
        }

        function resetInput() {
            currentInput = '';
            updateDisplay();
        }

        function addInput(symbol) {
            currentInput += symbol;
            updateDisplay();
            checkInput();
        }

        dotButton.addEventListener('click', () => addInput('.'));
        dashButton.addEventListener('click', () => addInput('-'));

        function updateDisplay() {
            inputDisplay.textContent = currentInput;
        }

        function checkInput() {
            if (currentInput === targetMorse[currentLetterIndex]) {
                currentLetterIndex++;
                updateProgressDisplay();
                updateCurrentLetterDisplay();
                if (currentLetterIndex === targetWord.length) {
                    endGame(true);
                } else {
                    resultDisplay.textContent = 'Правильно! Вводите следующую букву.';
                    resetInput();
                    resetTimer();
                }
            } else if (currentInput.length === targetMorse[currentLetterIndex].length) {
                attempts++;
                attemptsDisplay.textContent = `Попытки: ${attempts}`;
                resultDisplay.textContent = 'Неправильно. Попробуйте ещё раз.';
                resetInput();
            }
        }

        function startTimer() {
            timer = setInterval(() => {
                timeLeft--;
                timerDisplay.textContent = `Время: ${timeLeft}с`;
                if (timeLeft === 0) {
                    endGame(false);
                }
            }, 1000);
        }

        function resetTimer() {
            clearInterval(timer);
            timeLeft = 10;
            timerDisplay.textContent = `Время: ${timeLeft}с`;
            startTimer();
        }

        function endGame(isWin) {
            clearInterval(timer);
            dotButton.disabled = true;
            dashButton.disabled = true;
            if (isWin) {
                resultDisplay.textContent = `Поздравляем! Вы правильно ввели все слово "ivan" за ${attempts} попыток!`;
            } else {
                resultDisplay.textContent = 'Время вышло! Игра окончена.';
            }
        }

        function startGame() {
            currentInput = '';
            currentLetterIndex = 0;
            attempts = 0;
            updateProgressDisplay();
            updateCurrentLetterDisplay();
            resetTimer();
            updateDisplay();
            attemptsDisplay.textContent = 'Попытки: 0';
            resultDisplay.textContent = '';
            dotButton.disabled = false;
            dashButton.disabled = false;
        }

        restartButton.addEventListener('click', startGame);

        startGame();
    </script>
</body>
</html>
